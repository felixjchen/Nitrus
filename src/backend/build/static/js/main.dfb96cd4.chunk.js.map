{"version":3,"sources":["lib/search.js","lib/page.js","index.js"],"names":["searchResultProps","rows","headers","key","header","MySearch","shouldComponentUpdate","newProps","newState","render","react_default","a","createElement","Search","id","placeHolderText","size","labelText","onChange","_this","props","searchQueryOnChange","document","getElementById","value","React","Component","SearchResult","console","log","_this2","items","searchResultItems","map","item","TableRow","TableCell","concat","name","artists","album","src","images","url","className","Math","round","duration_ms","OverflowMenu","flipped","OverflowMenuItem","itemText","DataTable","_ref","getHeaderProps","getTableProps","getRowProps","getTableContainerProps","TableContainer","Table","TableHead","TableHeader","Object","assign","TableBody","SearchPane","_this3","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_ref2","asyncToGenerator","regenerator_default","mark","_callee","searchQuery","oldState","newItems","requestOptions","response","responseObj","wrap","_context","prev","next","state","method","Authorization","access_token","redirect","fetch","sent","t0","JSON","text","t1","parse","tracks","objectSpread","setState","stop","_x","apply","arguments","Fragment","search_MySearch","search_SearchResult","bottomSheetProps","overflowHeight","shadowTip","topShadow","overlay","scrollTopAtClose","Page","spotifyLogout","window","location","replace","profileImages","userID","room","users","push","profileImageURL","HeaderContainer","Header","aria-label","HeaderName","prefix","HeaderNavigation","HeaderGlobalBar","HeaderGlobalAction","onClick","bucket_10","Grid","Row","Column","sm","span","md","lg","search_SearchPane","SwipeableBottomSheet_default","stringify","spotifyID","URLSearchParams","search","get","backendURL","undefined","socket","io","on","emit","simpleRoom","lib_page","accessToken"],"mappings":"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","file":"static/js/main.dfb96cd4.chunk.js","sourcesContent":["import React from \"react\";\n// import { render } from \"react-dom\";\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Search,\n  OverflowMenu,\n  OverflowMenuItem,\n} from \"carbon-components-react\";\nimport styles from \"./search.css\";\nconst searchResultProps = {\n  rows: [],\n  headers: [\n    {\n      key: \"name\",\n      header: \"Name\",\n    },\n    {\n      key: \"artist\",\n      header: \"Artist\",\n    },\n    {\n      key: \"album\",\n      header: \"Album\",\n    },\n    {\n      key: \"duration\",\n      header: \"Duration\",\n    },\n    {\n      key: \"overflow\",\n      header: \"\",\n    },\n  ],\n};\n\nclass MySearch extends React.Component {\n  shouldComponentUpdate = (newProps, newState) => false;\n\n  render = () => {\n    return (\n      <Search\n        id=\"search\"\n        placeHolderText={\"Find a song\"}\n        size={\"lg\"}\n        labelText=\"search\"\n        onChange={() => {\n          this.props.searchQueryOnChange(\n            document.getElementById(\"search\").value\n          );\n        }}\n      />\n    );\n  };\n}\n\nclass SearchResult extends React.Component {\n  render = () => {\n    console.log(this.props.items);\n    const searchResultItems = this.props.items.map((item) => {\n      return (\n        <TableRow id={item.id} key={item.id}>\n          <TableCell key={`${item.id}:name`}>{item.name}</TableCell>\n          <TableCell key={`${item.id}:artist`}>\n            {item.artists[0].name}\n          </TableCell>\n          <TableCell key={`${item.id}:album`}>\n            {item.album.name}\n            <img\n              src={`${item.album.images[0].url}`}\n              className=\"albumPhoto\"\n            ></img>\n          </TableCell>\n          <TableCell key={`${item.id}:duration`}>\n            {Math.round((item.duration_ms * 10) / 1000 / 60) / 10} minutes\n          </TableCell>\n          <TableCell key=\"overflow\">\n            <OverflowMenu flipped>\n              <OverflowMenuItem itemText=\"Queue\"></OverflowMenuItem>\n            </OverflowMenu>\n          </TableCell>\n        </TableRow>\n      );\n    });\n\n    return (\n      <DataTable {...searchResultProps}>\n        {({\n          rows,\n          headers,\n          getHeaderProps,\n          getRowProps,\n          getTableProps,\n          getTableContainerProps,\n        }) => (\n          <TableContainer {...getTableContainerProps()}>\n            <Table {...getTableProps()}>\n              <TableHead>\n                <TableRow>\n                  {headers.map((header) => (\n                    <TableHeader\n                      key={header.key}\n                      {...getHeaderProps({ header })}\n                    >\n                      {header.header}\n                    </TableHeader>\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>{searchResultItems}</TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </DataTable>\n    );\n  };\n}\n\nclass SearchPane extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      items: [],\n    };\n  }\n\n  searchQueryOnChange = async (searchQuery) => {\n    let oldState = this.state;\n    let newItems = [];\n    if (searchQuery) {\n      let requestOptions = {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${this.props.access_token}` },\n        redirect: \"follow\",\n      };\n\n      let response = await fetch(\n        `https://api.spotify.com/v1/search?q=${searchQuery}&type=track`,\n        requestOptions\n      );\n      let responseObj = JSON.parse(await response.text());\n      newItems = responseObj.tracks.items;\n    }\n    let newState = { ...oldState, ...{ items: newItems } };\n    this.setState(newState);\n  };\n\n  render = () => {\n    return (\n      <>\n        <MySearch searchQueryOnChange={this.searchQueryOnChange}></MySearch>\n        <SearchResult {...this.state}></SearchResult>\n      </>\n    );\n  };\n}\nexport { SearchPane };\n","import React from \"react\";\n// import { render } from \"react-dom\";\nimport {\n  Header,\n  HeaderName,\n  HeaderNavigation,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  Grid,\n  Row,\n  Column,\n} from \"carbon-components-react\";\nimport SwipeableBottomSheet from \"react-swipeable-bottom-sheet\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport { SearchPane } from \"./search\";\nimport styles from \"./page.css\";\n\nconst bottomSheetProps = {\n  overflowHeight: 48,\n  shadowTip: false,\n  topShadow: false,\n  overlay: false,\n  scrollTopAtClose: true,\n};\n\nclass Page extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  spotifyLogout = () => {\n    window.location.replace(\"https://www.spotify.com/logout/\");\n  };\n\n  render() {\n    const profileImages = [];\n    for (let userID in this.props.room.users) {\n      profileImages.push(\n        <img\n          key={`${userID}_profilePhoto`}\n          className=\"profilePhoto\"\n          src={this.props.room.users[userID].profileImageURL}\n        ></img>\n      );\n    }\n    return (\n      <div id=\"page\">\n        <HeaderContainer\n          render={() => (\n            <>\n              <Header aria-label=\"Nitrous\">\n                <HeaderName prefix=\"\">Nitrous</HeaderName>\n                <HeaderNavigation aria-label=\"Nitrous\">\n                  {profileImages}\n                </HeaderNavigation>\n                <HeaderGlobalBar>\n                  <HeaderGlobalAction\n                    id=\"logoutIcon\"\n                    aria-label=\"Logout\"\n                    onClick={this.spotifyLogout}\n                  >\n                    <Logout20 />\n                  </HeaderGlobalAction>\n                </HeaderGlobalBar>\n              </Header>\n              <Grid>\n                <Row>\n                  <Column id=\"DesktopQueue\" sm={{ span: 0 }} md={2} lg={3}>\n                    Queue\n                  </Column>\n                  <Column sm={4} md={6} lg={9}>\n                    <SearchPane\n                      access_token={this.props.access_token}\n                    ></SearchPane>\n                  </Column>\n\n                  <Column sm={1} md={{ span: 0 }} lg={{ span: 0 }}>\n                    <SwipeableBottomSheet {...bottomSheetProps}>\n                      <div id=\"MobileQueue\">Queue</div>\n                    </SwipeableBottomSheet>\n                  </Column>\n                </Row>\n              </Grid>\n            </>\n          )}\n        />\n        <pre>{JSON.stringify(this.props, null, 2)}</pre>\n      </div>\n    );\n  }\n}\nexport default Page;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport io from \"socket.io-client\";\nimport Page from \"./lib/page\";\n\nconst urlSearchParams = new URLSearchParams(window.location.search);\nconst spotifyID = urlSearchParams.get(\"spotifyID\");\n\n// https://www.npmjs.com/package/socket.io-client\n// const backendURL = \"http://0.0.0.0\";\nconst backendURL = \"https://nitr0us.azurewebsites.net\";\n\nlet access_token = undefined;\nlet room = undefined;\n\nconst socket = io(backendURL);\nsocket.on(\"connect\", () => {\n  socket.emit(\"init\", spotifyID);\n});\n\nsocket.on(\"setRoom\", (simpleRoom) => {\n  room = simpleRoom;\n  console.log(room);\n  render(\n    <Page room={room} access_token={access_token} />,\n    document.getElementById(\"root\")\n  );\n});\n\nsocket.on(\"setAccessToken\", (accessToken) => {\n  if (!accessToken) {\n    window.location.replace(`${backendURL}/login`);\n  }\n\n  access_token = accessToken;\n  console.log(access_token);\n  render(\n    <Page room={room} access_token={access_token} />,\n    document.getElementById(\"root\")\n  );\n});\n\n// render(<Page />, document.getElementById(\"root\"));\n"],"sourceRoot":""}