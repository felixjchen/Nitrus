{"version":3,"sources":["lib/search.js","lib/page.js","index.js"],"names":["searchResultProps","rows","id","name","artist","port","rule","headers","key","header","MySearch","shouldComponentUpdate","newProps","newState","render","react_default","a","createElement","Search","placeHolderText","size","labelText","onChange","_this","props","searchQueryOnChange","document","getElementById","value","React","Component","SearchResult","searchResultItems","_this2","items","map","item","TableRow","TableCell","concat","artists","album","Math","round","duration_ms","OverflowMenu","flipped","OverflowMenuItem","itemText","DataTable","_ref","getHeaderProps","getTableProps","getRowProps","getTableContainerProps","TableContainer","Table","TableHead","TableHeader","Object","assign","TableBody","SearchPane","_this3","classCallCheck","this","possibleConstructorReturn","getPrototypeOf","call","_ref2","asyncToGenerator","regenerator_default","mark","_callee","searchQuery","oldState","newItems","requestOptions","response","responseObj","wrap","_context","prev","next","state","method","Authorization","access_token","redirect","fetch","sent","t0","JSON","text","t1","parse","tracks","objectSpread","setState","stop","_x","apply","arguments","Fragment","search_MySearch","search_SearchResult","bottomSheetProps","overflowHeight","shadowTip","topShadow","overlay","scrollTopAtClose","Page","HeaderContainer","Header","aria-label","HeaderName","prefix","HeaderNavigation","src","profileUrl","HeaderGlobalBar","HeaderGlobalAction","onClick","console","log","bucket_10","Grid","Row","Column","sm","span","md","lg","search_SearchPane","SwipeableBottomSheet_default","URLSearchParams","window","location","search","get","socket","io","on","emit","room","users","lib_page"],"mappings":"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","file":"static/js/main.f2aef1d3.chunk.js","sourcesContent":["import React from \"react\";\n// import { render } from \"react-dom\";\nimport {\n  DataTable,\n  TableContainer,\n  Table,\n  TableHead,\n  TableRow,\n  TableHeader,\n  TableBody,\n  TableCell,\n  Search,\n  OverflowMenu,\n  OverflowMenuItem,\n} from \"carbon-components-react\";\nimport styles from \"./search.css\";\nconst searchResultProps = {\n  rows: [\n    {\n      id: \"a\",\n      name: \"Load Balancer 3\",\n      artist: \"HTTP\",\n      port: 3000,\n      rule: \"Round robin\",\n    },\n  ],\n  headers: [\n    {\n      key: \"name\",\n      header: \"Name\",\n    },\n    {\n      key: \"artist\",\n      header: \"Artist\",\n    },\n    {\n      key: \"album\",\n      header: \"Album\",\n    },\n    {\n      key: \"duration\",\n      header: \"Duration\",\n    },\n    {\n      key: \"overflow\",\n      header: \"\",\n    },\n  ],\n};\n\nclass MySearch extends React.Component {\n  shouldComponentUpdate = (newProps, newState) => false;\n\n  render = () => {\n    return (\n      <Search\n        id=\"search\"\n        placeHolderText={\"Find a song\"}\n        size={\"lg\"}\n        labelText=\"search\"\n        onChange={() => {\n          this.props.searchQueryOnChange(\n            document.getElementById(\"search\").value\n          );\n        }}\n      />\n    );\n  };\n}\n\nclass SearchResult extends React.Component {\n  render = () => {\n    const searchResultItems = this.props.items.map((item) => {\n      return (\n        <TableRow id={item.id} key={item.id}>\n          <TableCell key={`${item.id}:name`}>{item.name}</TableCell>\n          <TableCell key={`${item.id}:artist`}>\n            {item.artists[0].name}\n          </TableCell>\n          <TableCell key={`${item.id}:album`}>{item.album.name}</TableCell>\n          <TableCell key={`${item.id}:duration`}>\n            {Math.round((item.duration_ms * 10) / 1000 / 60) / 10} minutes\n          </TableCell>\n          <TableCell key=\"overflow\">\n            <OverflowMenu flipped>\n              <OverflowMenuItem itemText=\"Queue\"></OverflowMenuItem>\n            </OverflowMenu>\n          </TableCell>\n        </TableRow>\n      );\n    });\n\n    return (\n      <DataTable {...searchResultProps}>\n        {({\n          rows,\n          headers,\n          getHeaderProps,\n          getRowProps,\n          getTableProps,\n          getTableContainerProps,\n        }) => (\n          <TableContainer {...getTableContainerProps()}>\n            <Table {...getTableProps()}>\n              <TableHead>\n                <TableRow>\n                  {headers.map((header) => (\n                    <TableHeader\n                      key={header.key}\n                      {...getHeaderProps({ header })}\n                    >\n                      {header.header}\n                    </TableHeader>\n                  ))}\n                </TableRow>\n              </TableHead>\n              <TableBody>{searchResultItems}</TableBody>\n            </Table>\n          </TableContainer>\n        )}\n      </DataTable>\n    );\n  };\n}\n\nclass SearchPane extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      items: [],\n    };\n  }\n\n  searchQueryOnChange = async (searchQuery) => {\n    let oldState = this.state;\n    let newItems = [];\n    if (searchQuery) {\n      let requestOptions = {\n        method: \"GET\",\n        headers: { Authorization: `Bearer ${this.props.access_token}` },\n        redirect: \"follow\",\n      };\n\n      let response = await fetch(\n        `https://api.spotify.com/v1/search?q=${searchQuery}&type=track`,\n        requestOptions\n      );\n      let responseObj = JSON.parse(await response.text());\n      newItems = responseObj.tracks.items;\n    }\n    let newState = { ...oldState, ...{ items: newItems } };\n    this.setState(newState);\n  };\n\n  render = () => {\n    return (\n      <>\n        <MySearch searchQueryOnChange={this.searchQueryOnChange}></MySearch>\n        <SearchResult {...this.state}></SearchResult>\n      </>\n    );\n  };\n}\nexport { SearchPane };\n","import React from \"react\";\n// import { render } from \"react-dom\";\nimport {\n  Header,\n  HeaderName,\n  HeaderNavigation,\n  HeaderContainer,\n  HeaderGlobalBar,\n  HeaderGlobalAction,\n  Grid,\n  Row,\n  Column,\n} from \"carbon-components-react\";\nimport SwipeableBottomSheet from \"react-swipeable-bottom-sheet\";\nimport { Logout20 } from \"@carbon/icons-react\";\nimport { SearchPane } from \"./search\";\nimport styles from \"./page.css\";\n\nconst bottomSheetProps = {\n  overflowHeight: 48,\n  shadowTip: false,\n  topShadow: false,\n  overlay: false,\n  scrollTopAtClose: true,\n};\n\nclass Page extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return (\n      <div id=\"page\">\n        <HeaderContainer\n          render={() => (\n            <>\n              <Header aria-label=\"Nitrous\">\n                <HeaderName\n                  // href=\"https://github.com/felixjchen/spotify-together\"\n                  prefix=\"\"\n                >\n                  Nitrous\n                </HeaderName>\n                <HeaderNavigation aria-label=\"Nitrous\">\n                  <img src={this.props.profileUrl}></img>\n                </HeaderNavigation>\n                <HeaderGlobalBar>\n                  <HeaderGlobalAction\n                    id=\"logoutIcon\"\n                    aria-label=\"Logout\"\n                    onClick={() => {\n                      console.log(\"logout button clicked\");\n                    }}\n                  >\n                    <Logout20 />\n                  </HeaderGlobalAction>\n                </HeaderGlobalBar>\n              </Header>\n              <Grid>\n                <Row>\n                  <Column id=\"DesktopQueue\" sm={{ span: 0 }} md={2} lg={3}>\n                    Queue\n                  </Column>\n                  <Column sm={4} md={6} lg={9}>\n                    <SearchPane\n                      access_token={this.props.access_token}\n                    ></SearchPane>\n                  </Column>\n\n                  <Column sm={1} md={{ span: 0 }} lg={{ span: 0 }}>\n                    <SwipeableBottomSheet {...bottomSheetProps}>\n                      <div id=\"MobileQueue\">Queue</div>\n                    </SwipeableBottomSheet>\n                  </Column>\n                </Row>\n              </Grid>\n            </>\n          )}\n        />\n      </div>\n    );\n  }\n}\nexport default Page;\n","import React from \"react\";\nimport { render } from \"react-dom\";\nimport io from \"socket.io-client\";\nimport Page from \"./lib/page\";\n\nconst urlSearchParams = new URLSearchParams(window.location.search);\nconst id = urlSearchParams.get(\"id\");\nlet access_token = \"\";\n\n// https://www.npmjs.com/package/socket.io-client\nconst backendAddress = \"http://0.0.0.0\";\nconst socket = io(backendAddress);\nsocket.on(\"connect\", () => {\n  socket.emit(\"syncReq\", id);\n});\n\nsocket.on(\"syncRes\", (room) => {\n  ({ access_token } = room.users[id]);\n  console.log(room, access_token);\n  render(\n    <Page room={room} access_token={access_token} />,\n    document.getElementById(\"root\")\n  );\n});\n\n// render(<Page />, document.getElementById(\"root\"));\n"],"sourceRoot":""}